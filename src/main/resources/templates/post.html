<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hotel Room</title>
    <link rel="stylesheet" type="text/css" href="../static/css/styles.css" th:href="@{/css/styles.css}">
</head>
<body>
<header th:insert="~{blocks/header :: header}"></header>
<div class="centered">
    <div th:if="${errorOfIncorrectDate}" class="alert-danger">
        <p th:text="${errorOfIncorrectDate}"></p>
    </div>
    <div th:if="${errorOfExistReservation}" class="alert-danger">
        <p th:text="${errorOfExistReservation}"></p>
        <ul class="alert-ul" th:each="reservation : ${reservations}">
            <li th:text="'С ' + ${reservation.dateOfReservation} + ' по ' + ${reservation.dateOfEviction}"></li>
        </ul>
    </div>
</div>
<h2 class="h2" th:text="${room.name}">Название</h2>
<div class="room-post">
    <div class="slider-and-details">
        <div class="slider-container">
            <div class="slider">
                <div th:each="photo, iterStat : ${room.photos}" class="slide">
                    <img th:src="@{'/photos/' + ${photo}}" alt="Изображение номера" width="150" height="150">
                </div>
            </div>
            <div class="button">
                <button id="prevSlide" class="slider-button">&laquo;</button>
                <button id="nextSlide" class="slider-button">&raquo;</button>
            </div>
        </div>
    <div class="room-details">
        <p>Спальных мест: <span th:text="${room.amountOfSleepers}"></span></p>
        <p>Услуги:
            <ul>
                <li th:each="service : ${room.services}" style="list-style: none">
                    <span th:text="${service}"></span>
                </li>
            </ul>
        </p>
        <p>Цена за день: <span th:text="${room.pricePerDay} + '$'"></span></p>
    </div>
        <form th:action="@{'/post/' + ${room.id}}" th:method="post" class="form">
            <p class="reserv">Бронирование</p>
            <div class="form-group">
                <label for="checkInDate">Дата заезда:</label>
                <input type="date" id="checkInDate" name="checkInDate" class="form-control">
            </div>
            <div class="form-group">
                <label for="checkOutDate">Дата выезда:</label>
                <input type="date" id="checkOutDate" name="checkOutDate" class="form-control">
            </div>
            <button type="submit" class="sign-btn">Забронировать</button>
        </form>
</div>
    <div class="description">
        <h4>Описание</h4>
        <p th:text="${room.description}"></p>
    </div>
</div>
<script>
    let currentIndex = 0;
    const slider = document.querySelector('.slider');
    const slides = document.querySelectorAll('.slide');

    document.getElementById('prevSlide').addEventListener('click', function() {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        updateSlider();
    });

    document.getElementById('nextSlide').addEventListener('click', function() {
        currentIndex = (currentIndex + 1) % slides.length;
        updateSlider();
    });

    function updateSlider() {
        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    updateSlider();

    const currentDate = new Date();
    currentDate.setDate(currentDate.getDate());

    // Преобразуйте текущую дату в строку в формате "YYYY-MM-DD"
    const formattedCurrentDate = currentDate.toISOString().split('T')[0];

    // Установите атрибут `min` для элементов input
    document.getElementById('checkInDate').min = formattedCurrentDate;
    document.getElementById('checkOutDate').min = formattedCurrentDate;
</script>

<footer th:insert="~{blocks/footer :: footer}"></footer>
</body>
</html>
